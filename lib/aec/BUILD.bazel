load("//lib:lib.bzl", "package_lib")
load("//toolchains/cmake:cmake.bzl", "cmake_lib")

package(default_visibility = ["//:__subpackages__"])

package_lib()

cmake_lib(
    name = "aec",
    cache_entries = {
        "BUILD_SHARED_LIBS": False,
    },
    out_static_libs = [
        "libaec.a",
        "libsz.a",
    ],
    # The build script insists on installing shared libs, so remove them.
    postfix_script = 'rm "${INSTALLDIR}"/lib/*.so{,.*}',
)
