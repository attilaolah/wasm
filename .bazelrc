# CONFIG OPTIONS
#
# The following config options are available:
#
# - cmake: 		     Download and build cmake from source.
# - emcmake:         DO NOT USE, not implemented yet.
# - system_cmake:    Use the preinstalled cmake in the execution environment.
# - system_emcmake:  Use the preinstalled emcmake in the execution environment.
#
# The following config options are mandatory:
#
# - One of {cmake, system_cmake, emcmake, system_emcmake}

# Allow the local workspace to define these configs.
# To make the default build work, add these lines to .bazelrc.local:
# build --config=system_cmake
try-import %workspace%/.bazelrc.local

# Configure toolchains for each target:
build:cmake          --extra_toolchains=//toolchains/cmake
build:system_cmake   --extra_toolchains=//toolchains/cmake:preinstalled
build:emcmake        --extra_toolchains=//toolchains/emcmake
build:system_emcmake --extra_toolchains=//toolchains/emcmake:preinstalled

# Additional Emscripten configuration:
build:emcmake        --config=emscripten
build:system_emcmake --config=emscripten

# Define that enables //toolchains/emcmake:enabled.
build:emscripten --define=target_platform=emscripten

# Required environment variables:
build:emscripten --action_env=BINARYEN=/usr
build:emscripten --action_env=BINARYEN_ROOT=/usr
build:emscripten --action_env=EM_CACHE=/tmp/em_cache

# Not implemented yet, so fail fast:
build:emcmake --not_implemented_yet
